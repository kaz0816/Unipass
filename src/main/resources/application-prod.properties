# Prefer Cloud SQL when SPRING_DATASOURCE_* are supplied.
# Fallback to in-memory H2 so Cloud Run can still boot for quick sharing/testing.
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:mem:unipass;MODE=MySQL;DATABASE_TO_LOWER=TRUE;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER_CLASS_NAME:org.h2.Driver}

spring.jpa.hibernate.ddl-auto=update
spring.sql.init.mode=never

# Optional Hikari tuning
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.connection-timeout=10000

server.port=${PORT:8080}
server.address=0.0.0.0
server.forward-headers-strategy=framework
